(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{74506:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fotos",function(){return a(17586)}])},17586:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return k},default:function(){return S}});var r=a(85893),s=a(67294);a(41377);var o=a(1954),n=a(6690),l=a(58530),c=a(41664),i=a.n(c),d=a(86455),u=a.n(d),h=a(7462),p=a(11163),x=a(55733),m=a.n(x);function f(e){let{title:t,subtitle:a,btnLink:c,btnText:d,variant:x,children:f,id:g,fotos:j}=e,[b,y]=(0,s.useState)(!1),w=(0,p.useRouter)().query.client,N=(0,h.p)(),[Z,_]=(0,s.useState)([]),[C,v]=(0,s.useState)([]),[E,k]=(0,s.useState)(0),S=async e=>{e.preventDefault();let t=new FormData(e.target).getAll("archivos"),a=[];k(0);for(let e=0;e<t.length;e++){let r=t[e],s=await R(r,e+1,t.length);a.push(s)}await O(a)},R=async(e,t,a)=>{let r=new FormData;return r.append("files",e),new Promise((e,t)=>{let s=new XMLHttpRequest;s.open("POST","".concat("https://strapi-fotos.maai.cloud","/api/upload"),!0),s.upload.onprogress=e=>{if(e.lengthComputable){let t=e.loaded/e.total*(100/a);k(e=>e+t)}},s.onload=()=>{200===s.status?e(JSON.parse(s.responseText)[0].id):t(Error("Error al subir archivo"))},s.onerror=()=>{t(Error("Error al subir archivo"))},s.send(r)})},O=async e=>{let t=e.map(async e=>{let t=JSON.stringify({data:{foto:e,galeria:g}}),a=new Headers;a.append("Content-Type","application/json");try{let e=await fetch("".concat("https://strapi-fotos.maai.cloud","/api/fotos"),{method:"POST",headers:a,body:t,redirect:"follow"});if(200===e.status)return await e.json();throw Error("Error al guardar la foto en la galer\xeda")}catch(e){throw e}});try{await Promise.all(t),u().fire({icon:"success",timer:5e3,showCancelButton:!1,showConfirmButton:!1,text:"Fotos agregadas a la galeria exitosamente!"}),window.location.reload()}catch(e){u().fire({icon:"error",timer:5e3,showCancelButton:!1,showConfirmButton:!1,text:"No se pudo generar el producto! favor verificar datos"})}},z=async()=>{if(!j||!Array.isArray(j)){console.error("Error: fotos no est\xe1 definido o no es un array");return}try{let e=new(m()),t=[];j.forEach((a,r)=>{let s=N+a.attributes.foto.data.attributes.url,o="imagen_".concat(r+1,".jpg"),n=fetch(s).then(e=>e.blob()).then(t=>e.file(o,t)).catch(e=>console.error("Error al descargar la imagen ".concat(o,":"),e));t.push(n)}),await Promise.all(t);let a=await e.generateAsync({type:"blob"}),r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download="imagenes.zip",document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(e){console.error("Error al descargar las im\xe1genes:",e)}};return(0,r.jsxs)(n.Z,{children:[w&&(0,r.jsx)(i(),{href:"#",className:"cs-center",onClick:z,children:(0,r.jsx)(n.Z,{className:"",children:(0,r.jsxs)("span",{className:"cs-icon_btn",children:[(0,r.jsx)(o.JO,{icon:"fa-cloud-download",style:{marginRight:"5px",fontSize:"30px",marginBottom:"10px"}}),"Descargar"]})})}),(0,r.jsx)(i(),{href:"#",className:"cs-center",onClick:()=>{y(!0)},children:(0,r.jsx)(n.Z,{className:"",children:(0,r.jsxs)("span",{className:"cs-icon_btn",children:[(0,r.jsx)(o.JO,{icon:"fa-upload",style:{marginRight:"5px",fontSize:"30px"}}),"Cargar fotos"]})})}),b&&(0,r.jsx)("div",{className:"popup",style:{zIndex:9999},children:(0,r.jsxs)("div",{className:"popup-content",children:[(0,r.jsx)("span",{className:"close",onClick:()=>{y(!1)},style:{fontSize:"40px"},children:"\xd7"}),(0,r.jsx)("h4",{children:"Cargar Fotos"}),(0,r.jsxs)("form",{onSubmit:S,children:[(0,r.jsx)("input",{type:"file",name:"archivos",multiple:!0,onChange:e=>{let t=e.target.files;if(t){let e=Array.from(t);_(e),v(e.map(e=>URL.createObjectURL(e)))}},required:!0}),(0,r.jsx)("button",{type:"submit",style:{padding:"10px 10px",backgroundColor:"#ff4a17",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"background-color 0.3s ease"},children:"Cargar"})]}),(0,r.jsx)(l.Z,{lg:"30",md:"5"}),(0,r.jsx)("div",{id:"progress-container",style:{width:"100%",backgroundColor:"#e0e0e0"},children:(0,r.jsx)("div",{id:"progress-bar",style:{width:"".concat(E,"%"),height:"20px",backgroundColor:"#76c7c0",transition:"width 0.2s"}})})]})})]})}var g=a(38680),j=a(41997),b=a(52869);function y(e){let{src:t,name:a,description:s,nfotos:o}=e;return(0,r.jsxs)(n.Z,{className:"cs-author_card text-center",children:[(0,r.jsx)("img",{src:t,alt:"Aauthor"}),(0,r.jsx)("h3",{children:a}),(0,r.jsx)("p",{children:s}),(0,r.jsxs)("p",{children:["Actualmente esta carpeta tiene ",(0,r.jsx)("strong",{style:{fontSize:"26px"},children:o})," Fotos"]})]})}var w=a(39418),N=a(92592),Z=()=>{let e=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let t=window.location.href;e.current&&N.toCanvas(e.current,t,function(e){e&&console.error(e),console.log("QR code generated")})},[]),(0,r.jsx)("canvas",{ref:e})};let _=(0,h.p)();function C(e){let{galeriaInfo:t,idGaleria:a,fotosData:c}=e,[i,d]=(0,s.useState)("all"),[u,h]=(0,s.useState)(300),x=(0,p.useRouter)().query.client,m=(e,t)=>{fetch(e).then(e=>e.blob()).then(e=>{let a=document.createElement("a");a.href=window.URL.createObjectURL(new Blob([e])),a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}).catch(e=>console.error("Error al descargar la imagen:",e))},N=Object.keys(c).length;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Z,{className:"container",children:(0,r.jsxs)(n.Z,{className:"row",children:[(0,r.jsxs)(n.Z,{className:"col-xl-5 col-lg-6",children:[(0,r.jsxs)(n.Z,{className:"cs-image_layer cs-style1",children:[(0,r.jsx)(y,{src:_+t.portadaGaleria.data.attributes.url,name:t.nombreGaleria,description:t.descripcionGaleria,nfotos:N}),(0,r.jsx)(l.Z,{lg:"10",md:"5"}),(0,r.jsx)(f,{title:t.nombreGaleria,subtitle:"Our Portfolio",id:a,fotos:c})]}),(0,r.jsx)(l.Z,{lg:"0",md:"40"})]}),(0,r.jsx)(n.Z,{className:"col-xl-5 offset-xl-1 col-lg-6",style:{zIndex:0},children:(0,r.jsxs)(w.Z,{title:"Compatir Experiencias",subtitle:"",children:[(0,r.jsx)(l.Z,{lg:"30",md:"20"}),(0,r.jsx)(l.Z,{lg:"30",md:"20"}),(0,r.jsx)(Z,{}),(0,r.jsx)(l.Z,{lg:"30",md:"30"}),(0,r.jsx)(n.Z,{className:"cs-separator cs-accent_bg"}),(0,r.jsx)(l.Z,{lg:"25",md:"0"})]})})]})}),(0,r.jsx)(n.Z,{className:"container",children:(0,r.jsx)(n.Z,{className:"cs-portfolio_1_heading",children:(0,r.jsx)(n.Z,{className:"cs-filter_menu cs-style1"})})}),(0,r.jsx)(l.Z,{lg:"90",md:"45"}),x&&Array.isArray(c)&&c.length>0&&(0,r.jsx)(g.Z,{speed:500,plugins:[j.Z,b.Z],elementClassNames:"cs-masonry_4_col",download:!1,children:c.slice(0,u).map((e,t)=>(0,r.jsx)(n.Z,{href:_+e.attributes.foto.data.attributes.url,className:"all",children:(0,r.jsxs)(n.Z,{className:"cs-portfolio cs-style1 cs-type2",style:{height:"".concat(e.height,"px")},children:[(0,r.jsx)(n.Z,{className:"cs-lightbox_item",children:(0,r.jsx)("img",{src:_+e.attributes.foto.data.attributes.url,alt:e.title,style:{height:"".concat(e.height,"px")}})}),(0,r.jsx)(n.Z,{className:"cs-portfolio_hover"}),(0,r.jsx)("span",{className:"cs-plus"}),(0,r.jsx)(n.Z,{className:"cs-portfolio_bg cs-bg",style:{backgroundImage:'url("'.concat(_+e.attributes.foto.data.attributes.url,'")')}}),(0,r.jsxs)(n.Z,{className:"cs-portfolio_info",children:[(0,r.jsx)(n.Z,{className:"cs-portfolio_info_bg cs-accent_bg"}),(0,r.jsx)("h2",{className:"cs-portfolio_title",children:e.attributes.galeria.data.attributes.nombreGaleria}),(0,r.jsx)(n.Z,{className:"cs-portfolio_subtitle",children:e.attributes.galeria.data.attributes.descripcionGaleria}),(0,r.jsx)("button",{className:"download-button",style:{position:"absolute",top:"10px",right:"10px",padding:"10px 10px",backgroundColor:"#ff4a17",color:"#fff",border:"none",borderRadius:"25px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"background-color 0.3s ease"},onClick:()=>m(_+e.attributes.foto.data.attributes.url,e.attributes.foto.data.attributes.url),children:"Descargar"})]})]})},t))}),(0,r.jsx)(n.Z,{className:"container",children:(0,r.jsx)(n.Z,{className:"text-center",children:c.length<=u?"":(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{lg:"65",md:"40"}),(0,r.jsxs)("span",{className:"cs-text_btn",onClick:()=>h(u+4),children:[(0,r.jsx)("span",{children:"Load More"}),(0,r.jsx)(o.JO,{icon:"bi:arrow-right"})]})]})})})]})}var v=a(23697);function E(e){let{galeria:t,idgaleria:a,fotos:s}=e,o=t.attributes;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{variant:void 0}),(0,r.jsx)(l.Z,{lg:"150",md:"80"}),(0,r.jsx)(C,{galeriaInfo:o,idGaleria:a,fotosData:s}),(0,r.jsx)(l.Z,{lg:"150",md:"80"})]})}a(80699);var k=!0,S=e=>{let{galerias:t,idGaleria:a,fotos:s}=e,o=t.data,n=s.data;return(0,p.useRouter)(),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(E,{galeria:o,idgaleria:a,fotos:n})})}},80699:function(){}},function(e){e.O(0,[71,76,526,132,888,774,179],function(){return e(e.s=74506)}),_N_E=e.O()}]);